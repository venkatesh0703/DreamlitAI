<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
    <meta charset="UTF-8">
    <title>DreamlitAI - Premium AI Image Generator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4f46e5">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- Animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff',
                            100: '#e0e7ff',
                            200: '#c7d2fe',
                            300: '#a5b4fc',
                            400: '#818cf8',
                            500: '#6366f1',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                            900: '#312e81',
                            950: '#1e1b4b',
                        },
                        dark: {
                            bg: '#0f172a',
                            surface: '#1e293b',
                            border: '#334155'
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Alpine.js -->
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <style>
        html {
            font-size: 14.5px;
            /* Scales entire UI to approx 90% of standard size */
        }

        [x-cloak] {
            display: none !important;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .dark ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .dark .glass-panel {
            background: rgba(30, 41, 59, 0.7);
        }
    </style>
</head>

<body
    class="bg-gray-50 dark:bg-dark-bg text-gray-900 dark:text-gray-100 h-full overflow-hidden transition-colors duration-300">

    <div x-data="imageGenApp()" x-init="init()" class="flex h-full">

        <!-- Sidebar -->
        <aside
            class="w-80 bg-white dark:bg-dark-surface border-r border-gray-200 dark:border-dark-border flex flex-col transition-all duration-300 transform"
            :class="{'translate-x-0': !isMobile() || showSidebar, '-translate-x-full': isMobile() && !showSidebar, 'absolute z-50 h-full': isMobile(), 'relative': !isMobile()}"
            x-show="true" @click.away="if(isMobile()) showSidebar = false">

            <!-- Logo Area -->
            <div class="p-6 border-b border-gray-200 dark:border-dark-border flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div
                        class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-purple-600 flex items-center justify-center shadow-lg shadow-primary-500/30">
                        <i class="fas fa-palette text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-xl tracking-tight">DreamlitAI</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-400 font-medium"
                            x-text="currentMode === 'image' ? 'Premium Generator' : (currentMode === 'text' ? 'AI Chat Assistant' : 'Voice Synthesizer')">
                            Premium Generator</p>
                    </div>
                </div>
                <button @click="showSidebar = false"
                    class="lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- New Creation Button -->
            <div class="p-4 space-y-2">
                <button @click="clearChat()"
                    class="w-full py-3 px-4 bg-primary-50 dark:bg-primary-900/20 hover:bg-primary-100 dark:hover:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-xl font-medium transition-colors flex items-center justify-center gap-2 border border-primary-200 dark:border-primary-800/50 group">
                    <i class="fas fa-plus transition-transform group-hover:rotate-90"></i>
                    <span>New Creation</span>
                </button>

                <!-- Mode Switcher -->
                <div class="grid grid-cols-3 gap-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-xl">
                    <button @click="currentMode = 'image'"
                        class="py-2 px-2 rounded-lg text-xs font-medium transition-all duration-200 flex flex-col items-center gap-1"
                        :class="currentMode === 'image' ? 'bg-white dark:bg-dark-surface text-primary-600 shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                        <i class="fas fa-image text-sm"></i>
                        <span>Image</span>
                    </button>
                    <button @click="currentMode = 'text'"
                        class="py-2 px-2 rounded-lg text-xs font-medium transition-all duration-200 flex flex-col items-center gap-1"
                        :class="currentMode === 'text' ? 'bg-white dark:bg-dark-surface text-primary-600 shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                        <i class="fas fa-comment-alt text-sm"></i>
                        <span>Text</span>
                    </button>
                    <button @click="currentMode = 'audio'"
                        class="py-2 px-2 rounded-lg text-xs font-medium transition-all duration-200 flex flex-col items-center gap-1"
                        :class="currentMode === 'audio' ? 'bg-white dark:bg-dark-surface text-primary-600 shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'">
                        <i class="fas fa-music text-sm"></i>
                        <span>Audio</span>
                    </button>
                </div>
            </div>

            <!-- History Section (Collapsible) -->
            <div class="px-4 mb-2" x-data="{ showHistory: false }">
                <button @click="showHistory = !showHistory"
                    class="flex items-center justify-between w-full text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 hover:text-primary-500 transition-colors">
                    <span>History</span>
                    <i class="fas" :class="showHistory ? 'fa-chevron-up' : 'fa-chevron-down'"></i>
                </button>
                <div x-show="showHistory" x-collapse class="space-y-1 max-h-40 overflow-y-auto pr-1 custom-scrollbar">
                    <template x-for="(chat, index) in chatHistory" :key="chat.id">
                        <div
                            class="group flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 cursor-pointer transition-colors">
                            <div @click="loadChat(chat)" class="flex-1 min-w-0">
                                <p class="text-sm font-medium text-gray-700 dark:text-gray-200 truncate"
                                    x-text="chat.title"></p>
                                <p class="text-xs text-gray-400" x-text="chat.date"></p>
                            </div>
                            <button @click.stop="deleteChat(index)"
                                class="opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-all p-1">
                                <i class="fas fa-trash-alt text-xs"></i>
                            </button>
                        </div>
                    </template>
                    <div x-show="chatHistory.length === 0" class="text-xs text-gray-400 italic text-center py-2">
                        No saved chats yet
                    </div>
                </div>
            </div>

            <!-- Settings Scroll Area -->
            <div class="flex-1 overflow-y-auto p-4 space-y-6">

                <!-- Mode Specific Headers -->
                <!-- Text Mode Settings -->
                <div x-show="currentMode === 'text'" class="space-y-6">
                    <div
                        class="text-center py-2 text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-dark-border mb-2">
                        <i class="fas fa-robot text-2xl mb-2 opacity-50"></i>
                        <p class="text-xs">Configure your chat assistant.</p>
                    </div>

                    <!-- Persona Selector -->
                    <div class="space-y-2">
                        <label
                            class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider block">Persona</label>
                        <div class="relative">
                            <select x-model="textPersona"
                                class="w-full pl-3 pr-8 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-dark-border rounded-lg text-xs font-medium focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer">
                                <option value="helpful">Helpful Assistant</option>
                                <option value="coder">Professional Coder</option>
                                <option value="creative">Creative Writer</option>
                                <option value="sarcastic">Sarcastic Friend</option>
                                <option value="teacher">Patient Teacher</option>
                            </select>
                            <div
                                class="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-400">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Creativity Control -->
                    <div class="space-y-2">
                        <div class="flex justify-between text-xs">
                            <span class="text-gray-600 dark:text-gray-300">Creativity</span>
                            <span class="text-indigo-500 font-medium"
                                x-text="Math.round(textTemperature * 100) + '%'"></span>
                        </div>
                        <input type="range" min="0" max="1" step="0.1" x-model="textTemperature"
                            class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500 hover:accent-indigo-400">
                        <div class="flex justify-between text-[10px] text-gray-400">
                            <span>Precise</span>
                            <span>Balanced</span>
                            <span>Creative</span>
                        </div>
                    </div>
                </div>
                <!-- Audio Mode Controls -->
                <div x-show="currentMode === 'audio'" class="space-y-6">

                    <!-- Voice Selection -->
                    <div>
                        <label
                            class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 block">Neural
                            Voices</label>
                        <div class="grid grid-cols-2 gap-2">
                            <template x-for="voice in voices" :key="voice.id">
                                <button @click="activeVoice = voice.id"
                                    class="relative p-3 rounded-xl border text-left transition-all duration-200 group overflow-hidden"
                                    :class="activeVoice === voice.id 
                                        ? 'bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-dark-surface border-indigo-500 shadow-sm' 
                                        : 'bg-white dark:bg-dark-surface border-gray-200 dark:border-dark-border hover:border-indigo-300 dark:hover:border-indigo-700'">

                                    <div class="flex items-center gap-2 mb-1">
                                        <div class="w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-sm"
                                            :class="`bg-${voice.color}-500`">
                                            <i class="fas"
                                                :class="voice.gender === 'Male' ? 'fa-mars' : 'fa-venus'"></i>
                                        </div>
                                        <span class="text-xs font-bold text-gray-900 dark:text-gray-100"
                                            x-text="voice.name"></span>
                                    </div>
                                    <div class="text-[10px] text-gray-500 dark:text-gray-400 truncate"
                                        x-text="voice.desc"></div>

                                    <!-- Active Indicator -->
                                    <div x-show="activeVoice === voice.id"
                                        class="absolute top-2 right-2 text-indigo-500 text-xs">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </button>
                            </template>
                        </div>
                    </div>

                    <!-- Audio Settings -->
                    <div class="space-y-4 pt-4 border-t border-gray-100 dark:border-dark-border">
                        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider">Audio Tuning</h3>

                        <!-- Speaking Style (Emotion) -->
                        <div class="space-y-2">
                            <label class="text-xs text-gray-600 dark:text-gray-300">Speaking Style</label>
                            <div class="relative">
                                <select x-model="audioStyle"
                                    class="w-full pl-3 pr-8 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-dark-border rounded-lg text-xs font-medium focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer">
                                    <option value="general">General / Neutral</option>
                                    <option value="cheerful">Cheerful & Happy</option>
                                    <option value="sad">Sad & Melancholic</option>
                                    <option value="angry">Angry & Intense</option>
                                    <option value="excited">Excited & Energetic</option>
                                    <option value="terrified">Fearful / Terrified</option>
                                    <option value="whispering">Whispering</option>
                                    <option value="shouting">Shouting</option>
                                </select>
                                <div
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-400">
                                    <i class="fas fa-chevron-down text-xs"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Format Control -->
                        <div class="space-y-2">
                            <label class="text-xs text-gray-600 dark:text-gray-300">Format</label>
                            <div class="relative">
                                <select
                                    class="w-full pl-3 pr-8 py-2 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-dark-border rounded-lg text-xs font-medium focus:ring-2 focus:ring-indigo-500 outline-none appearance-none cursor-pointer">
                                    <option value="mp3">MP3 (High Quality)</option>
                                    <option value="wav">WAV (Lossless)</option>
                                    <option value="ogg">OGG (Compressed)</option>
                                </select>
                                <div
                                    class="absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-400">
                                    <i class="fas fa-chevron-down text-xs"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Speed Control -->
                        <div class="space-y-2">
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-600 dark:text-gray-300">Speed</span>
                                <span class="text-indigo-500 font-medium" x-text="audioRate"></span>
                            </div>
                            <input type="range" min="-50" max="50" value="0" step="5"
                                @input="audioRate = ($event.target.value > 0 ? '+' : '') + $event.target.value + '%'"
                                class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-indigo-500 hover:accent-indigo-400">
                        </div>

                        <!-- Pitch Control -->
                        <div class="space-y-2">
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-600 dark:text-gray-300">Pitch</span>
                                <span class="text-indigo-500 font-medium" x-text="audioPitch"></span>
                            </div>
                            <input type="range" min="-20" max="20" value="0" step="2"
                                @input="audioPitch = ($event.target.value > 0 ? '+' : '') + $event.target.value + 'Hz'"
                                class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 hover:accent-purple-400">
                        </div>

                        <!-- Volume Control -->
                        <div class="space-y-2">
                            <div class="flex justify-between text-xs">
                                <span class="text-gray-600 dark:text-gray-300">Volume</span>
                                <span class="text-indigo-500 font-medium" x-text="audioVolume"></span>
                            </div>
                            <input type="range" min="-50" max="50" value="0" step="5"
                                @input="audioVolume = ($event.target.value > 0 ? '+' : '') + $event.target.value + '%'"
                                class="w-full h-1.5 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-pink-500 hover:accent-pink-400">
                        </div>
                    </div>
                </div>

                <!-- Style Selection (Image Only) -->
                <div x-show="currentMode === 'image'" x-transition>
                    <label
                        class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 block">Style</label>
                    <div class="grid grid-cols-2 gap-2">
                        <template x-for="style in getQuickStyles()" :key="style.name">
                            <button @click="selectedStyle = style.name"
                                :class="{'ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20': selectedStyle === style.name, 'bg-gray-50 dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700': selectedStyle !== style.name}"
                                class="p-3 rounded-lg text-left transition-all border border-gray-200 dark:border-dark-border relative overflow-hidden group">
                                <div class="text-sm font-medium truncate" x-text="style.name"></div>
                                <div class="absolute inset-0 border-2 border-primary-500 rounded-lg opacity-0 transition-opacity"
                                    :class="{'opacity-100': selectedStyle === style.name}"></div>
                            </button>
                        </template>
                    </div>
                    <button @click="showStyleModal = true"
                        class="mt-2 w-full text-xs text-primary-600 dark:text-primary-400 font-medium hover:underline text-center py-1">
                        View All Styles
                    </button>
                </div>

                <!-- Model Selection (Image Only) -->
                <div x-show="currentMode === 'image'" x-transition>
                    <label
                        class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 block">Model</label>
                    <div class="space-y-2">
                        <template x-for="model in getQuickModels()" :key="model.name">
                            <button @click="selectedModel = model.name"
                                :class="{'bg-primary-50 dark:bg-primary-900/20 border-primary-500': selectedModel === model.name, 'bg-gray-50 dark:bg-gray-800 border-gray-200 dark:border-dark-border hover:border-primary-300': selectedModel !== model.name}"
                                class="w-full p-3 rounded-xl border text-left transition-all flex items-center gap-3">
                                <div
                                    class="w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden">
                                    <img :src="`/static/models/${model.name}.jpg`"
                                        @error="$event.target.style.display='none'" class="w-full h-full object-cover">
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="text-sm font-medium truncate" x-text="model.display_name || model.name">
                                    </div>
                                    <div class="text-xs text-gray-500 dark:text-gray-400 truncate"
                                        x-text="model.description || 'AI Model'"></div>
                                </div>
                                <div x-show="selectedModel === model.name" class="text-primary-500">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </button>
                        </template>
                    </div>
                    <button @click="showModelModal = true"
                        class="mt-2 w-full text-xs text-primary-600 dark:text-primary-400 font-medium hover:underline text-center py-1">
                        View All Models
                    </button>
                </div>

                <!-- Advanced Settings (Image Only) -->
                <div x-show="currentMode === 'image'" x-transition>
                    <label
                        class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 block">Settings</label>



                    <!-- Toggles -->
                    <div class="space-y-3">
                        <button @click="quality = !quality"
                            class="w-full flex items-center justify-between group p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors border border-transparent hover:border-gray-100 dark:hover:border-gray-700">
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Enhanced Quality</span>
                            <div class="relative w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner transition-colors duration-200"
                                :class="{'bg-primary-500': quality}">
                                <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200"
                                    :class="{'translate-x-5': quality}"></div>
                            </div>
                        </button>

                        <button @click="hdr = !hdr"
                            class="w-full flex items-center justify-between group p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors border border-transparent hover:border-gray-100 dark:hover:border-gray-700">
                            <span class="text-sm font-medium text-gray-700 dark:text-gray-300">HDR Mode</span>
                            <div class="relative w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full shadow-inner transition-colors duration-200"
                                :class="{'bg-purple-500': hdr}">
                                <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200"
                                    :class="{'translate-x-5': hdr}"></div>
                            </div>
                        </button>
                    </div>
                </div>

            </div>

            <!-- User/Footer Area -->
            <div class="p-4 border-t border-gray-200 dark:border-dark-border bg-gray-50/50 dark:bg-dark-surface/50">
                <label
                    class="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3 block">Theme</label>
                <div class="grid grid-cols-2 gap-2 bg-gray-200 dark:bg-gray-700 p-1 rounded-xl">
                    <button @click="darkMode = false"
                        class="flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all duration-200"
                        :class="!darkMode ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200'">
                        <i class="fas fa-sun"></i>
                        <span>Light</span>
                    </button>
                    <button @click="darkMode = true"
                        class="flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all duration-200"
                        :class="darkMode ? 'bg-gray-800 text-white shadow-sm' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200'">
                        <i class="fas fa-moon"></i>
                        <span>Dark</span>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col h-full relative w-full">

            <!-- Mobile Header -->
            <header
                class="lg:hidden h-16 bg-white/80 dark:bg-dark-surface/80 backdrop-blur border-b border-gray-200 dark:border-dark-border flex items-center justify-between px-4 z-40">
                <button @click.stop="showSidebar = true" class="p-2 -ml-2 text-gray-600 dark:text-gray-300">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <span class="font-bold text-lg">DreamlitAI</span>
                <div class="w-8"></div> <!-- Spacer -->
            </header>

            <!-- Chat Area -->
            <div class="flex-1 overflow-y-auto p-4 lg:p-8 scroll-smooth" x-ref="chatContainer">
                <div class="max-w-6xl mx-auto space-y-6 lg:space-y-8 pb-32">

                    <!-- Welcome Message -->
                    <template x-if="chatMessages.length === 0">
                        <div class="text-center py-20 animate-fade-in">
                            <div
                                class="w-20 h-20 bg-gradient-to-br from-primary-500 to-purple-600 rounded-3xl mx-auto flex items-center justify-center shadow-2xl shadow-primary-500/40 mb-8 transform hover:scale-105 transition-transform duration-500">
                                <i class="fas fa-magic text-4xl text-white"></i>
                            </div>
                            <h2
                                class="text-2xl lg:text-3xl font-bold mb-3 lg:mb-4 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400">
                                What will you create today?
                            </h2>
                            <p class="text-base lg:text-lg text-gray-500 dark:text-gray-400 max-w-md mx-auto">
                                Describe your imagination, and let AI bring it to life.
                            </p>
                        </div>
                    </template>

                    <!-- Messages -->
                    <template x-for="(msg, idx) in chatMessages" :key="idx">
                        <div class="animate-slide-up">

                            <!-- User Message -->
                            <template x-if="msg.type === 'user'">
                                <div class="flex justify-end mb-6 group">
                                    <div class="flex items-center gap-2">
                                        <button @click="startEditPromptFromUser(idx)"
                                            class="opacity-0 group-hover:opacity-100 text-gray-400 hover:text-primary-500 transition-all p-2"
                                            title="Edit Prompt">
                                            <i class="fas fa-pencil-alt text-sm"></i>
                                        </button>
                                        <div
                                            class="bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100 px-5 py-3 lg:px-6 lg:py-4 rounded-3xl rounded-tr-sm max-w-[90%] sm:max-w-[75%] shadow-sm">
                                            <p class="text-base leading-relaxed whitespace-pre-wrap"
                                                x-text="msg.content">
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <!-- Bot/Image Message -->
                            <template x-if="msg.type === 'image'">
                                <div class="flex gap-4 mb-8">
                                    <div
                                        class="w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-purple-600 flex-shrink-0 flex items-center justify-center mt-1">
                                        <i class="fas fa-magic text-white text-xs"></i>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div
                                            class="bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-3xl rounded-tl-sm overflow-hidden shadow-lg transition-all hover:shadow-xl">
                                            <!-- Image Header -->
                                            <div
                                                class="px-5 py-3 border-b border-gray-100 dark:border-dark-border bg-gray-50/50 dark:bg-dark-surface/50 flex justify-between items-center">
                                                <span
                                                    class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Generated
                                                    Image</span>
                                                <div class="flex gap-2">
                                                    <button @click="copyToClipboard(msg.prompt)"
                                                        class="text-gray-400 hover:text-primary-500 transition-colors"
                                                        title="Copy Prompt">
                                                        <i class="fas fa-copy"></i>
                                                    </button>
                                                    <button @click="startEditPrompt(idx)"
                                                        class="text-gray-400 hover:text-primary-500 transition-colors"
                                                        title="Edit/Regenerate">
                                                        <i class="fas fa-pencil-alt"></i>
                                                    </button>
                                                    <button
                                                        @click="downloadImage(msg.content, 'dreamlit-' + Date.now())"
                                                        class="text-gray-400 hover:text-primary-500 transition-colors"
                                                        title="Download">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button @click="showModal = true; generatedImage = msg.content"
                                                        class="text-gray-400 hover:text-primary-500 transition-colors"
                                                        title="Expand">
                                                        <i class="fas fa-expand"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- Image -->
                                            <div class="relative group cursor-pointer bg-gray-100 dark:bg-black/20"
                                                @click="showModal = true; generatedImage = msg.content">
                                                <img :src="msg.content"
                                                    class="w-auto max-w-full h-auto object-contain mx-auto shadow-sm rounded-lg"
                                                    alt="Generated Image" loading="lazy">
                                                <div
                                                    class="absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors duration-300">
                                                </div>
                                            </div>

                                            <!-- Prompt/Details -->
                                            <div class="px-5 py-4 bg-gray-50/30 dark:bg-dark-surface/30">
                                                <p
                                                    class="text-sm text-gray-600 dark:text-gray-300 font-medium italic mb-2">
                                                    " <span x-text="msg.prompt"></span> "</p>
                                                <div class="flex flex-wrap gap-2 mt-3">
                                                    <span
                                                        class="px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-dark-border"
                                                        x-text="msg.model"></span>
                                                    <span
                                                        class="px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-dark-border"
                                                        x-text="msg.style || 'No Style'"></span>
                                                    <span
                                                        class="px-2 py-1 rounded-md bg-gray-100 dark:bg-gray-800 text-xs text-gray-500 dark:text-gray-400 border border-gray-200 dark:border-dark-border"
                                                        x-text="msg.resolution"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <!-- Loading State -->
                            <template x-if="msg.type === 'loading'">
                                <div class="flex gap-4 mb-8">
                                    <div
                                        class="w-8 h-8 rounded-full bg-gradient-to-br from-primary-500 to-purple-600 flex-shrink-0 flex items-center justify-center mt-1 animate-pulse">
                                        <i class="fas fa-magic text-white text-xs"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div
                                            class="bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-3xl rounded-tl-sm p-6 shadow-sm inline-block">
                                            <div class="flex items-center gap-3">
                                                <div class="flex space-x-1">
                                                    <div class="w-2 h-2 bg-primary-500 rounded-full animate-bounce"
                                                        style="animation-delay: 0s"></div>
                                                    <div class="w-2 h-2 bg-primary-500 rounded-full animate-bounce"
                                                        style="animation-delay: 0.1s"></div>
                                                    <div class="w-2 h-2 bg-primary-500 rounded-full animate-bounce"
                                                        style="animation-delay: 0.2s"></div>
                                                </div>
                                                <span
                                                    class="text-sm font-medium text-gray-600 dark:text-gray-300">Dreaming
                                                    up your masterpiece...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>

                            <!-- Error Message -->
                            <template x-if="msg.type === 'error'">
                                <div class="flex gap-4 mb-8">
                                    <div
                                        class="w-8 h-8 rounded-full bg-red-500 flex-shrink-0 flex items-center justify-center mt-1">
                                        <i class="fas fa-exclamation text-white text-xs"></i>
                                    </div>
                                    <div
                                        class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/50 text-red-700 dark:text-red-300 px-6 py-4 rounded-3xl rounded-tl-sm shadow-sm">
                                        <p x-text="msg.content"></p>
                                    </div>
                                </div>
                            </template>

                            <!-- Bot Text Message (Markdown supported) -->
                            <template x-if="msg.type === 'bot'">
                                <div class="flex gap-4 mb-8">
                                    <div
                                        class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex-shrink-0 flex items-center justify-center mt-1">
                                        <i class="fas fa-robot text-white text-xs"></i>
                                    </div>
                                    <div
                                        class="bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-3xl rounded-tl-sm p-4 lg:p-6 shadow-sm max-w-[95%] lg:max-w-[85%] prose dark:prose-invert relative group">
                                        <div x-text="msg.content" class="whitespace-pre-wrap"></div>

                                        <button @click="copyToClipboard(msg.content)"
                                            class="absolute top-2 right-2 text-gray-400 hover:text-primary-500 opacity-0 group-hover:opacity-100 transition-all p-1.5 bg-gray-50/50 dark:bg-dark-bg/50 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-bg backdrop-blur-sm"
                                            title="Copy Text">
                                            <i class="fas fa-copy text-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </template>

                            <!-- Audio Message -->
                            <template x-if="msg.type === 'audio'">
                                <div class="flex gap-4 mb-8">
                                    <div
                                        class="w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-rose-600 flex-shrink-0 flex items-center justify-center mt-1">
                                        <i class="fas fa-music text-white text-xs"></i>
                                    </div>
                                    <div
                                        class="bg-white dark:bg-dark-surface border border-gray-200 dark:border-dark-border rounded-3xl rounded-tl-sm p-5 shadow-sm min-w-[300px]">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div
                                                class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center">
                                                <i class="fas fa-play text-primary-500"></i>
                                            </div>
                                            <div>
                                                <p class="text-xs font-semibold uppercase text-gray-400 tracking-wider">
                                                    Generated Audio</p>
                                                <p class="text-sm font-medium text-gray-700 dark:text-gray-200 capitalize"
                                                    x-text="msg.voice + ' Voice'"></p>
                                            </div>
                                        </div>
                                        <audio controls :src="msg.content" class="w-full"></audio>
                                        <p class="text-xs text-gray-400 mt-2 italic">" <span x-text="msg.prompt"></span>
                                            "</p>
                                    </div>
                                </div>
                            </template>

                        </div>
                    </template>
                </div>
            </div>

            <!-- Input Area -->
            <div
                class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white to-transparent dark:from-dark-bg dark:via-dark-bg pb-6 pt-10 px-4 sm:px-6 lg:px-8 z-30">

                <!-- Smart Suggestions Panel -->
                <div x-show="showSuggestions" x-transition:enter="transition ease-out duration-300"
                    x-transition:enter-start="opacity-0 translate-y-4 scale-95"
                    x-transition:enter-end="opacity-100 translate-y-0 scale-100"
                    x-transition:leave="transition ease-in duration-200"
                    x-transition:leave-start="opacity-100 translate-y-0 scale-100"
                    x-transition:leave-end="opacity-0 translate-y-4 scale-95" @click.away="showSuggestions = false"
                    class="max-w-6xl mx-auto mb-4 bg-white/10 dark:bg-slate-900/60 backdrop-blur-xl border border-white/20 dark:border-white/10 p-4 lg:p-6 rounded-2xl shadow-2xl relative overflow-hidden"
                    x-cloak>

                    <!-- Close Button -->
                    <button @click="showSuggestions = false"
                        class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">
                        <i class="fas fa-times"></i>
                    </button>

                    <div class="flex flex-col md:flex-row gap-6">
                        <!-- Analysis Column -->
                        <div
                            class="w-full md:w-1/3 space-y-4 border-b md:border-b-0 md:border-r border-white/10 pb-4 md:pb-0 md:pr-4">
                            <h3
                                class="text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 uppercase tracking-wider">
                                <i class="fas fa-microscope mr-2"></i>Prompt Analysis
                            </h3>

                            <!-- Optimization Score -->
                            <div class="flex items-center gap-4">
                                <div class="relative w-16 h-16 flex-shrink-0">
                                    <svg class="w-full h-full transform -rotate-90">
                                        <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4"
                                            fill="transparent" class="text-gray-700" />
                                        <circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4"
                                            fill="transparent" :stroke-dasharray="175.929"
                                            :stroke-dashoffset="175.929 - (175.929 * (optimizations?.quality_score || 0) / 100)"
                                            class="text-indigo-500 transition-all duration-1000 ease-out" />
                                    </svg>
                                    <span
                                        class="absolute inset-0 flex items-center justify-center text-sm font-bold text-white"
                                        x-text="(optimizations?.quality_score || 0) + '%'"></span>
                                </div>
                                <div>
                                    <div class="text-sm font-medium text-gray-200">Quality Score</div>
                                    <div class="text-xs text-indigo-400"
                                        x-text="optimizations?.optimization_level + ' Optimization'"></div>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="bg-white/5 rounded-lg p-2 border border-white/5">
                                    <div class="text-gray-400">Resolution</div>
                                    <div class="text-gray-200 font-medium"
                                        x-text="optimizations?.recommended_resolution || 'Standard'"></div>
                                </div>
                                <div class="bg-white/5 rounded-lg p-2 border border-white/5">
                                    <div class="text-gray-400">Est. Time</div>
                                    <div class="text-gray-200 font-medium"
                                        x-text="optimizations?.estimated_generation_time || '~15s'"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Suggestions Column -->
                        <div class="flex-1 space-y-4">
                            <h3
                                class="text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400 uppercase tracking-wider">
                                <i class="fas fa-lightbulb mr-2"></i>Smart Suggestions
                            </h3>

                            <div class="flex flex-wrap gap-2 max-h-40 overflow-y-auto custom-scrollbar">
                                <template x-for="suggestion in suggestions" :key="suggestion">
                                    <button @click="applySuggestion(suggestion)"
                                        class="text-xs text-left px-3 py-2 rounded-lg bg-white/5 hover:bg-gradient-to-r hover:from-indigo-500/20 hover:to-purple-500/20 border border-white/10 hover:border-indigo-500/50 transition-all duration-200 flex items-start gap-2 group">
                                        <i class="fas fa-plus text-indigo-400 mt-0.5 group-hover:text-indigo-300"></i>
                                        <span class="text-gray-300 group-hover:text-white" x-text="suggestion"></span>
                                    </button>
                                </template>
                                <div x-show="suggestions.length === 0" class="text-sm text-gray-500 italic">No
                                    suggestions available.</div>
                            </div>

                            <!-- Auto-Optimization Actions -->
                            <div class="pt-4 border-t border-white/10 flex flex-wrap gap-3"
                                x-show="recommendations.models.length > 0 || recommendations.styles.length > 0">
                                <button @click="applyOptimization()"
                                    class="flex-1 py-2 px-4 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-medium shadow-lg hover:shadow-indigo-500/25 transition-all duration-300 transform hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2">
                                    <i class="fas fa-rocket"></i>
                                    <span>One-Click Optimize</span>
                                </button>

                                <template x-if="recommendations.models.length > 0">
                                    <div class="flex items-center gap-2 text-xs text-gray-400">
                                        <span>Recommended Model:</span>
                                        <span class="text-indigo-400" x-text="recommendations.models[0]"></span>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="max-w-6xl mx-auto relative space-y-2">



                    <div
                        class="relative bg-white dark:bg-dark-surface rounded-2xl shadow-2xl border border-gray-200 dark:border-dark-border transition-all focus-within:ring-2 focus-within:ring-primary-500/50 focus-within:border-primary-500">

                        <!-- Microphone Button (Voice Command) -->
                        <button @click="toggleVoice()"
                            class="absolute left-3 bottom-3 p-2 rounded-xl transition-all duration-300 z-10 group"
                            :class="isListening ? 'bg-red-500 text-white animate-pulse shadow-red-500/50 shadow-lg' : 'text-gray-400 hover:text-primary-500 hover:bg-gray-100 dark:hover:bg-white/5'">
                            <i class="fas" :class="isListening ? 'fa-microphone-lines' : 'fa-microphone'"></i>

                            <!-- Tooltip -->
                            <span
                                class="absolute bottom-full left-0 mb-2 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">
                                <span x-text="isListening ? 'Listening...' : 'Voice Command'"></span>
                            </span>
                        </button>

                        <textarea x-model="currentMessage" @keydown.enter.prevent="if(!$event.shiftKey) sendMessage()"
                            class="w-full bg-transparent border-0 rounded-2xl py-4 pl-12 pr-14 text-gray-900 dark:text-gray-100 placeholder-gray-400 focus:ring-0 resize-none max-h-32 min-h-[60px]"
                            :placeholder="currentMode === 'image' ? 'Describe your image... (e.g. A futuristic city)' : (currentMode === 'text' ? 'Ask me anything...' : 'Describe the audio you want...')"
                            rows="1" :disabled="isGenerating"></textarea>

                        <!-- Main Generate Button (Magic Wand) -->
                        <button @click="sendMessage()" :disabled="!currentMessage.trim() || isGenerating"
                            class="absolute right-2 bottom-2 p-3 rounded-xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 hover:from-indigo-500 hover:via-purple-500 hover:to-pink-500 text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-purple-500/30 hover:scale-105 active:scale-95 group z-20">
                            <i class="fas text-lg"
                                :class="isGenerating ? 'fa-spinner fa-spin' : (currentMode === 'image' ? 'fa-wand-magic-sparkles' : (currentMode === 'text' ? 'fa-paper-plane' : 'fa-music'))"></i>
                            <span class="sr-only">Generate</span>

                            <!-- Premium Glow Effect -->
                            <div
                                class="absolute inset-0 rounded-xl bg-white/20 blur-md opacity-0 group-hover:opacity-100 transition-opacity">
                            </div>
                        </button>
                    </div>
                    <p class="text-center text-xs text-gray-400 dark:text-gray-500 mt-2">
                        DreamlitAI can make mistakes. Review generated images carefully.
                    </p>
                </div>
            </div>

        </main>

        <!-- Full Screen Image Modal -->
        <div x-show="showModal" x-transition.opacity.duration.300ms
            class="fixed inset-0 z-[100] bg-black/95 backdrop-blur-sm flex items-center justify-center p-4"
            @click="showModal = false" x-cloak>
            <div class="relative max-w-7xl w-full max-h-full flex flex-col items-center justify-center" @click.stop>
                <img :src="generatedImage" class="max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl">
                <div class="mt-6 flex gap-4">
                    <button @click="downloadImage(generatedImage, 'dreamlit-full-' + Date.now())"
                        class="px-6 py-2 bg-white text-black rounded-full font-medium hover:bg-gray-200 transition-colors flex items-center gap-2">
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button @click="showModal = false"
                        class="px-6 py-2 bg-white/10 text-white rounded-full font-medium hover:bg-white/20 transition-colors">
                        Close
                    </button>
                </div>
                <button @click="showModal = false"
                    class="absolute -top-12 right-0 text-white/50 hover:text-white text-2xl">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Style Selection Modal -->
        <div x-show="showStyleModal" x-transition.opacity
            class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4" x-cloak>
            <div class="bg-white dark:bg-dark-surface rounded-2xl w-full max-w-4xl max-h-[80vh] flex flex-col shadow-2xl"
                @click.away="showStyleModal = false">
                <div class="p-6 border-b border-gray-200 dark:border-dark-border flex justify-between items-center">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Select Style</h3>
                    <button @click="showStyleModal = false"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                        <template x-for="category in style_categories" :key="category.category">
                            <template x-for="style in category.styles" :key="style.name">
                                <button @click="selectedStyle = style.name; showStyleModal = false"
                                    class="group relative aspect-square rounded-xl overflow-hidden border-2 transition-all"
                                    :class="selectedStyle === style.name ? 'border-primary-500 ring-2 ring-primary-500/30' : 'border-transparent hover:border-gray-300 dark:hover:border-gray-600'">
                                    <img :src="style.image || `/static/style_images/${style.name.toLowerCase().replace(/\s+/g, '_')}.jfif`"
                                        @error="setDefaultImage($event, 'style')"
                                        class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                                    <div
                                        class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent flex items-end p-3">
                                        <span class="text-white font-medium text-sm truncate w-full text-center"
                                            x-text="style.name"></span>
                                    </div>
                                    <div x-show="selectedStyle === style.name"
                                        class="absolute top-2 right-2 bg-primary-500 text-white w-6 h-6 rounded-full flex items-center justify-center shadow-lg">
                                        <i class="fas fa-check text-xs"></i>
                                    </div>
                                </button>
                            </template>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <!-- Model Selection Modal -->
        <div x-show="showModelModal" x-transition.opacity
            class="fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4" x-cloak>
            <div class="bg-white dark:bg-dark-surface rounded-2xl w-full max-w-4xl max-h-[80vh] flex flex-col shadow-2xl"
                @click.away="showModelModal = false">
                <div class="p-6 border-b border-gray-200 dark:border-dark-border flex justify-between items-center">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">Select Model</h3>
                    <button @click="showModelModal = false"
                        class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto p-6">
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <template x-for="category in model_categories" :key="category.category">
                            <template x-for="model in category.models" :key="model.name">
                                <button @click="selectedModel = model.name; showModelModal = false"
                                    class="flex items-start gap-4 p-4 rounded-xl border-2 text-left transition-all hover:bg-gray-50 dark:hover:bg-gray-800/50"
                                    :class="selectedModel === model.name ? 'border-primary-500 bg-primary-50 dark:bg-primary-900/10' : 'border-gray-200 dark:border-dark-border'">
                                    <div
                                        class="w-12 h-12 rounded-lg bg-gray-200 dark:bg-gray-700 flex-shrink-0 overflow-hidden">
                                        <img :src="`/static/models/${model.name}.jpg`"
                                            @error="setDefaultImage($event, 'model', model.name)"
                                            class="w-full h-full object-cover">
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="font-semibold text-gray-900 dark:text-gray-100"
                                            x-text="model.display_name || model.name"></div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"
                                            x-text="model.description || 'High quality AI model'"></p>
                                    </div>
                                    <div x-show="selectedModel === model.name" class="text-primary-500">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                </button>
                            </template>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification Toast -->
        <div x-show="notification" x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0 transform translate-y-2"
            x-transition:enter-end="opacity-100 transform translate-y-0"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100 transform translate-y-0"
            x-transition:leave-end="opacity-0 transform translate-y-2"
            class="fixed bottom-24 left-1/2 -translate-x-1/2 z-50 bg-gray-900 text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-3"
            x-cloak>
            <i class="fas fa-check-circle text-green-400"></i>
            <span x-text="notification" class="font-medium"></span>
        </div>

    </div>

    <script>
        // Pass data from Flask to JS
        window.style_categories = {{ style_categories | tojson }};
        window.models = {{ models | tojson }};
        window.model_categories = {{ model_categories | tojson }};
    </script>
    <script src="/static/app.js"></script>
</body>

</html>